resource "frontegg_workspace" "main" {
  # These use destination account values, not source
  name                = var.workspace_name
  country             = var.country
  backend_stack       = var.backend_stack
  frontend_stack      = var.frontend_stack
  frontegg_domain     = var.frontegg_domain
  allowed_origins     = var.allowed_origins
  open_saas_installed = false

  mfa_policy {
    enforce               = "off"
    allow_remember_device = true
    device_expiration     = 1209600
  }

  mfa_authentication_app {
    service_name = "Roy Daniel Dev Success"
  }

  password_policy {
    min_length        = 8
    max_length        = 128
    min_phrase_length = 6
    min_tests         = 3
    allow_passphrases = false
    history           = 0
  }

  hosted_login {
    allowed_redirect_urls = [
        "http://localhost:3000",
        "http://localhost:3000/oauth/callback"
    ]
  }

  saml {
    acs_url      = "https://portal.frontegg.com/auth/saml/callback"
    sp_entity_id = "frontegg-portal"
    redirect_url = "https://portal.frontegg.com/account/saml/callback"
  }

  oidc {
    redirect_url = ""
  }
}